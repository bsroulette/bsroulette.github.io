webpackJsonp([5],{"6FNo":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=s("bOdI"),e=s.n(n),o=s("d7EF"),i=s.n(o),u=s("//Fk"),l=s.n(u),c=s("rViV"),r=s.n(c),_=s("pa/N"),d=s("bzuE"),p=s("in2j"),v={data:function(){return{stakeAmount:"0",withdrawAmount:"0",totalAmount:null,payoutEosPool:null,payoutSandPool:null,eosTenThousand:null,sandTenThousand:null,eosEstimate:null,sandEstimate:null,eosAssets:null,sandAssets:null,tokenAmount:null,withdrawTokenAmount:"0 SAND",withdrawState:null,stakeState:null,stakeLoading:null,supplyObj:null,timeTarget:null,countdownTime:null,countdownTimer:null}},mounted:function(){var t=this;this.request(),this.timeTarget=Date.parse(new Date((new Date).toLocaleDateString()))/1e3+86400,this.countdownTime=this.timeTarget-Date.parse(new Date)/1e3,this.countdownTimer=setInterval(function(){t.countdownTime--},1e3);var a=this;window.addEventListener("visibilitychange",function(){document.hidden?clearInterval(a.countdownTimer):a.countdownTimer=setInterval(function(){a.countdownTime--},1e3)})},destroyed:function(){clearInterval(this.countdownTimer)},methods:e()({getSandTotal:function(){var t=this;_.a.getTableRows({json:!0,code:d.a.betsandToken,table:"totalstakes",scope:"SAND"}).then(function(a){t.totalAmount=a.rows[0].balance})},getPayoutPool:function(){var t=this;l.a.all([_.a.getTableRows({json:!0,code:d.a.betsandBonus,table:"bonusaccts",scope:"EOS"}),_.a.getTableRows({json:!0,code:"betsandbonus",table:"bonusaccts",scope:"SAND"})]).then(function(a){for(var s=i()(a,2),n=s[0],e=s[1],o=0;o<n.rows.length;o++)1==n.rows[o].is_dividend&&(t.payoutEosPool=n.rows[o].balance);for(var u=0;u<e.rows.length;u++)1==e.rows[u].is_dividend&&(t.payoutSandPool=e.rows[u].balance)})},getUserAssets:function(){var t=this;this.account.name&&l.a.all([_.a.getTableRows({json:!0,code:d.a.betsandBonus,table:"playeraccts",scope:"EOS"}),_.a.getTableRows({json:!0,code:d.a.betsandBonus,table:"playeraccts",scope:"SAND"})]).then(function(a){for(var s=i()(a,2),n=s[0],e=s[1],o=0;o<n.rows.length;o++)n.rows[o].player==t.account.name&&(t.eosAssets=n.rows[o]);for(var u=0;u<e.rows.length;u++)e.rows[u].player==t.account.name&&(t.sandAssets=e.rows[u])})},getTokenAmount:function(){var t=this;this.account.name&&_.a.getTableRows({json:!0,code:d.a.betsandToken,table:"accounts",scope:this.account.name}).then(function(a){t.tokenAmount=a.rows[0].balance})},getWithdrawTokenAmount:function(){var t=this;this.account.name&&_.a.getTableRows({json:!0,code:d.a.betsandToken,table:"stakes",scope:this.account.name}).then(function(a){a.rows.length&&(t.withdrawTokenAmount=a.rows[0].balance)})},getState:function(){var t=this;this.account.name&&_.a.getTableRows({json:!0,code:d.a.betsandToken,table:"intransits",scope:"SAND"}).then(function(a){if(a.rows.length){for(var s=0,n=0,e=0;e<a.rows.length;e++)a.rows[e].owner==t.account.name&&(1==a.rows[e].type?s+=parseFloat(a.rows[e].quantity.replace(" SAND","")):2==a.rows[e].type&&(n+=parseFloat(a.rows[e].quantity.replace(" SAND",""))));t.stakeState=s,t.withdrawState=n}})},stakeClick:function(){var t=this;this.stakeAmount>0&&this.stakeAmount<this.tokenAmount&&this.account.name&&scatter.eos(p.a,r.a,{}).transaction({actions:[{account:d.a.betsandToken,name:"stake",authorization:[{actor:this.account.name,permission:this.account.authority}],data:{owner:this.account.name,type:1,quantity:Number(this.stakeAmount).toFixed(4)+" SAND",memo:""}}]}).then(function(){t.request(),t.stakeAmount=0}).catch(function(a){t.$notify.error(a.message||JSON.parse(a).error.details[0].message)})},withdrawClick:function(){var t=this;this.withdrawAmount>0&&this.withdrawAmount<this.withdrawTokenAmount&&this.account.name&&scatter.eos(p.a,r.a,{}).transaction({actions:[{account:d.a.betsandToken,name:"stake",authorization:[{actor:this.account.name,permission:this.account.authority}],data:{owner:this.account.name,type:2,quantity:Number(this.withdrawAmount).toFixed(4)+" SAND",memo:""}}]}).then(function(){t.request(),t.withdrawAmount=0}).catch(function(a){t.$notify.error(a.message||JSON.parse(a).error.details[0].message)})},getSupply:function(){var t=this;_.a.getTableRows({json:!0,code:d.a.betsandToken,table:"stat",scope:"SAND"}).then(function(a){t.supplyObj=a.rows[0]})},request:function(){this.getSandTotal(),this.getSupply(),this.getPayoutPool(),this.getUserAssets(),this.getTokenAmount(),this.getWithdrawTokenAmount(),this.getState()},updateParams:function(){this.totalAmount&&this.payoutSandPool&&(this.sandTenThousand=this.$multiply(this.payoutSandPool.replace(" SAND",""),this.$divide(this.totalAmount.replace(" SAND",""),1e4))),this.totalAmount&&this.payoutEosPool&&(this.eosTenThousand=this.$multiply(this.payoutEosPool.replace(" EOS",""),this.$divide(this.totalAmount.replace(" SAND",""),1e4))),this.totalAmount&&this.payoutEosPool&&this.withdrawTokenAmount&&(this.eosEstimate=this.$multiply(this.payoutEosPool.replace(" EOS",""),this.$divide(this.withdrawTokenAmount.replace(" SAND",""),this.totalAmount.replace(" SAND","")))),this.totalAmount&&this.payoutSandPool&&this.withdrawTokenAmount&&(this.sandEstimate=this.$multiply(this.payoutSandPool.replace(" SAND",""),this.$divide(this.withdrawTokenAmount.replace(" SAND",""),this.totalAmount.replace(" SAND",""))))}},"withdrawClick",function(t){var a=this;if(t){var s=s.split(" ");if(s[0]>0)scatter.eos(p.a,r.a,{}).transaction({actions:[{account:"betsandbonus",name:"withdrawdiv",authorization:[{actor:this.account.name,permission:this.account.authority}],data:{owner:this.account.name,quantity:t,memo:""}}]}).then(function(){a.request(),a.withdrawAmount=0}).catch(function(t){a.$notify.error(t.message||JSON.parse(t).error.details[0].message)})}}),computed:{account:function(){return this.$store.state.account},circulating:function(){return this.supplyObj&&this.supplyObj.supply&&this.supplyObj.max_supply?parseFloat(100*this.$divide(this.supplyObj.supply.replace(" SAND",""),this.supplyObj.max_supply.replace(" SAND",""))).toFixed(2):0},countdownPayout:function(){return this.countdownTime>79200?this.$t("payout.payouting"):this.$t("payout.payout_next")},t_total_staked:function(){return this.$t("payout.total_staked")},t_payout_pool:function(){return this.$t("payout.payout_pool")},t_payout_estimated:function(){return this.$t("payout.payout_estimated")},t_paout_10_k:function(){return this.$t("payout.paout_10_k")},t_my_balance:function(){return this.$t("payout.my_balance")},t_claim:function(){return this.$t("payout.claim")},t_stake_sand:function(){return this.$t("payout.stake_sand")},t_available:function(){return this.$t("payout.available")},t_unstake_amount:function(){return this.$t("payout.unstake_amount")},t_stake:function(){return this.$t("payout.stake")},t_available_unstake:function(){return this.$t("payout.available_unstake")},t_stake_title:function(){return this.$t("payout.stake_title")},t_stake_amount:function(){return this.$t("payout.stake_amount")},t_stake_state:function(){return this.$t("payout.stake_state")},t_staking:function(){return this.$t("payout.staking")},t_unstake:function(){return this.$t("payout.unstake")},t_unstake_state:function(){return this.$t("payout.unstake_state")},t_unstaking:function(){return this.$t("payout.unstaking")},t_unstake_title:function(){return this.$t("payout.unstake_title")},t_payouting:function(){return this.$t("payout.payouting")},t_payout_next:function(){return this.$t("payout.payout_next")},language:function(){return this.$store.state.language}},watch:{account:function(){this.request()},payoutEosPool:function(){this.updateParams()},payoutSandPool:function(){this.updateParams()},totalAmount:function(){this.updateParams()},withdrawTokenAmount:function(){this.updateParams()}}},h={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("section",{staticClass:"payout"},[n("div",{staticClass:"total-staked"},[n("div",{staticClass:"total-title"},[n("p",[t._v(t._s(t.t_total_staked))]),t._v(" "),n("p",[t._v(t._s(t.countdownPayout)),n("span",{staticClass:"countdown"},[t._v(t._s(t._f("countdownHour")(t.countdownTime)))])])]),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"content"},[n("img",{staticClass:"total-img",attrs:{src:s("5LMJ")}}),t._v(" "),n("p",{staticClass:"total-sand"},[t._v(t._s(t.totalAmount))]),t._v(" "),t.supplyObj&&t.supplyObj.supply?n("p",{staticClass:"total-desc"},[t._v("("+t._s(t.circulating)+"% of circulating "+t._s(t.supplyObj.supply)+")")]):n("p",{staticClass:"total-desc"},[t._v("(0% of circulating 0 SAND)")])])])]),t._v(" "),n("div",{staticClass:"pool"},[n("p",{staticClass:"pool-title"},[t._v(t._s(t.t_payout_pool))]),t._v(" "),n("div",{staticClass:"eos-pool"},[n("div",{staticClass:"eos-title"},[n("img",{attrs:{src:s("si/1")}}),t._v(" "),n("span",[t._v(t._s(t.payoutEosPool))])]),t._v(" "),n("div",{staticClass:"calculate"},[n("p",[t._v(t._s(t.t_payout_estimated))]),t._v(" "),n("p",[t._v(t._s(t._f("toFixed4")(t.eosEstimate))+" "),n("span",[t._v("EOS")])])]),t._v(" "),n("div",{staticClass:"calculate-unit"},[n("p",[t._v(t._s(t.t_paout_10_k))]),t._v(" "),n("p",[t._v(t._s(t.eosTenThousand)+" "),n("span",[t._v("EOS")])])])]),t._v(" "),n("div",{staticClass:"sand-pool"},[n("div",{staticClass:"sand-title"},[n("img",{attrs:{src:s("5LMJ")}}),t._v(" "),n("span",[t._v(t._s(t.payoutSandPool))])]),t._v(" "),n("div",{staticClass:"calculate"},[n("p",[t._v(t._s(t.t_payout_estimated))]),t._v(" "),n("p",[t._v(t._s(t.sandEstimate)+" "),n("span",[t._v("SAND")])])]),t._v(" "),n("div",{staticClass:"calculate-unit"},[n("p",[t._v(t._s(t.t_paout_10_k))]),t._v(" "),n("p",[t._v(t._s(t._f("toFixed4")(t.sandTenThousand))+" "),n("span",[t._v("SAND")])])])])]),t._v(" "),n("div",{staticClass:"dividend"},[n("div",{staticClass:"dividend-title"},[n("p",[t._v(t._s(t.t_my_balance))])]),t._v(" "),n("div",{staticClass:"eos-balance"},[n("div",{staticClass:"balance-div"},[n("img",{attrs:{src:s("si/1")}}),t._v(" "),t.eosAssets>0?n("p",[t._v(t._s(t._f("deleteEos")(t.eosAssets.bonus))+" "),n("span",[t._v("EOS")])]):n("p",[t._v("0 "),n("span",[t._v("EOS")])])]),t._v(" "),n("el-button",{staticClass:"operation-button",attrs:{loading:!1},on:{click:function(a){t.withdrawClick(t.eosAssets.bonus)}}},[t._v("\n        "+t._s(t.t_claim)+"\n      ")])],1),t._v(" "),n("div",{staticClass:"sand-balance"},[n("div",{staticClass:"balance-div"},[n("img",{attrs:{src:s("5LMJ")}}),t._v(" "),t.sandAssets>0?n("p",[t._v(t._s(t._f("deleteSand")(t.sandAssets.bonus))+" "),n("span",[t._v("SAND")])]):n("p",[t._v("0 "),n("span",[t._v("SAND")])])]),t._v(" "),n("el-button",{staticClass:"operation-button",attrs:{loading:!1},on:{click:function(a){t.withdrawClick(t.sandAssets.bonus)}}},[t._v("\n        "+t._s(t.t_claim)+"\n      ")])],1)]),t._v(" "),n("div",{staticClass:"stake-sand"},[n("p",{staticClass:"stake-sand-title"},[t._v(t._s(t.t_stake_sand))]),t._v(" "),n("div",{staticClass:"stake-sand-content"},[n("div",{staticClass:"stake-title"},[t.tokenAmount?n("p",[t._v(t._s(t.t_available)+" "),n("span",[t._v(t._s(t._f("deleteSand")(t.tokenAmount)))]),t._v(" SAND")]):n("p",[t._v(t._s(t.t_available)+" "),n("span",[t._v("0")]),t._v(" SAND")])]),t._v(" "),n("div",{staticClass:"stake-sand-div"},[n("img",{attrs:{src:s("5LMJ")}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.stakeAmount,expression:"stakeAmount"}],staticClass:"stake-input",attrs:{placeholder:"edit me",type:"text"},domProps:{value:t.stakeAmount},on:{input:function(a){a.target.composing||(t.stakeAmount=a.target.value)}}}),t._v(" "),n("el-button",{staticClass:"operation-button",attrs:{loading:!1},on:{click:t.stakeClick}},[t._v("\n          "+t._s(t.t_stake)+"\n        ")])],1)])]),t._v(" "),n("div",{staticClass:"unstaked-state-div"},[n("div",{staticClass:"state-title"},[n("p",[t._v(t._s(t.t_stake_title))])]),t._v(" "),n("div",{staticClass:"state-div"},[n("div",{staticClass:"unstaked-amount"},[n("p",[t._v(t._s(t.t_stake_amount))]),t._v(" "),t.stakeState>0?n("p",[t._v(t._s(t.stakeState))]):n("p",[t._v("0")])]),t._v(" "),n("div",{staticClass:"unstaked-state"},[n("p",[t._v(t._s(t.t_stake_state))]),t._v(" "),t.stakeState?n("p",[t._v(t._s(t.t_staking))]):n("p",[t._v("-")])])])]),t._v(" "),n("div",{staticClass:"unstake-sand"},[n("p",{staticClass:"unstake-sand-title"},[t._v(t._s(t.t_available_unstake))]),t._v(" "),n("div",{staticClass:"unstake-sand-content"},[n("div",{staticClass:"unstake-title"},[t.withdrawTokenAmount?n("p",[t._v(t._s(t.t_available_unstake)+" "),n("span",[t._v(t._s(t._f("deleteSand")(t.withdrawTokenAmount)))]),t._v(" SAND")]):n("p",[t._v(t._s(t.t_available_unstake)+" "),n("span",[t._v("0")]),t._v(" SAND")])]),t._v(" "),n("div",{staticClass:"unstake-sand-div"},[n("img",{attrs:{src:s("5LMJ")}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.withdrawAmount,expression:"withdrawAmount"}],staticClass:"stake-input",attrs:{type:"text",placeholder:""},domProps:{value:t.withdrawAmount},on:{input:function(a){a.target.composing||(t.withdrawAmount=a.target.value)}}}),t._v(" "),n("el-button",{staticClass:"operation-button",attrs:{loading:!1},on:{click:t.withdrawClick}},[t._v("\n          "+t._s(t.t_unstake)+"\n        ")])],1)])]),t._v(" "),n("div",{staticClass:"unstaked-state-div"},[n("div",{staticClass:"state-title"},[n("p",[t._v(t._s(t.t_unstake_title))])]),t._v(" "),n("div",{staticClass:"state-div"},[n("div",{staticClass:"unstaked-amount"},[n("p",[t._v(t._s(t.t_unstake_amount))]),t._v(" "),t.withdrawState?n("p",[t._v(t._s(t.withdrawState))]):n("p",[t._v("0")])]),t._v(" "),n("div",{staticClass:"unstaked-state"},[n("p",[t._v(t._s(t.t_unstake_state))]),t._v(" "),t.withdrawState?n("p",[t._v(t._s(t.t_unstaking))]):n("p",[t._v("-")])])])])])},staticRenderFns:[]};var m=s("VU/8")(v,h,!1,function(t){s("BN6w")},"data-v-936cd976",null);a.default=m.exports},BN6w:function(t,a){}});
//# sourceMappingURL=5.ddf185deba4d48654097.js.map